<!DOCTYPE html>
<html lang="sw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- PWA MANIFEST -->
    <link rel="manifest" href="manifest.json">
    
    <!-- For iOS - Add to Home Screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Dr. William">
    <link rel="apple-touch-icon" href="images/icon-192.png">
    
    <!-- Theme color -->
    <meta name="theme-color" content="#D4AF37">
    
    <title>Kilinge cha Dr. William</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --gold-primary: #D4AF37;
            --gold-shine: #FFD700;
            --gold-dark: #AA6C39;
            --dark-bg: #050505;
            --panel-black: rgba(10, 10, 10, 0.85);
            --text-white: #F5F5F5;
            --text-gold: #F4E4BC;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--dark-bg);
            background-image: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.7)),
                url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-attachment: fixed;
            background-position: center 0;
            color: var(--text-white);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Parallax background */
        body::after {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: inherit;
            background-attachment: scroll;
            background-position: center 0;
            z-index: -1;
            animation: slowZoom 30s infinite alternate ease-in-out;
        }
        
        @keyframes slowZoom {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }

        /* ===== KITUFE CHA KUSAKINISHA ===== */
        .install-container {
            display: flex;
            justify-content: center;
            padding: 15px 10px;
            background: rgba(0,0,0,0.8);
            border-bottom: 2px solid var(--gold-primary);
            position: sticky;
            top: 0;
            z-index: 10001;
            backdrop-filter: blur(5px);
            transition: opacity 1s ease, transform 1s ease;
        }

        .install-container.hidden {
            opacity: 0;
            transform: translateY(-100%);
            pointer-events: none;
        }
        
        #install-button {
            background: linear-gradient(135deg, #D4AF37, #AA6C39);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 0 25px rgba(212,175,55,0.7);
            transition: transform 0.3s, box-shadow 0.3s;
            font-family: 'Cinzel', serif;
            letter-spacing: 1px;
        }
        
        #install-button:hover {
            transform: scale(1.08);
            box-shadow: 0 0 40px var(--gold-shine);
        }
        
        #install-button i { font-size: 1.6rem; }

        /* ===== SHAKE ANIMATION ===== */
        @keyframes shake {
            0%,100% { transform: translateX(0); }
            10%,30%,50%,70%,90% { transform: translateX(-5px); }
            20%,40%,60%,80% { transform: translateX(5px); }
        }
        .shake { animation: shake 0.5s ease-in-out; }

        /* ===== TIMER DISPLAY ===== */
        #timer-display {
            position: fixed;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #D4AF37, #AA6C39);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: bold;
            z-index: 9999;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            border: 2px solid #FFD700;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        /* ===== CARTOON ASSISTANT STYLES ===== */
        .cartoon-assistant {
            position: fixed;
            bottom: 100px;
            left: 20px;
            z-index: 10002;
            max-width: 300px;
            animation: float 3s infinite ease-in-out;
        }

        .cartoon-assistant.hidden {
            display: none;
        }

        .cartoon-box {
            background: linear-gradient(145deg, #667eea, #764ba2);
            border-radius: 30px 30px 30px 10px;
            padding: 20px;
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.5);
            border: 3px solid #FFD700;
            position: relative;
        }

        .cartoon-box::before {
            content: '';
            position: absolute;
            left: 20px;
            bottom: -15px;
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 20px solid #764ba2;
            transform: rotate(45deg);
        }

        .cartoon-avatar {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .cartoon-face {
            width: 60px;
            height: 60px;
            background: #FFD966;
            border-radius: 50%;
            position: relative;
            border: 3px solid white;
        }

        .cartoon-hat {
            width: 30px;
            height: 15px;
            background: white;
            position: absolute;
            top: -8px;
            left: 15px;
            border-radius: 10px 10px 0 0;
        }

        .cartoon-hat::before {
            content: '+';
            position: absolute;
            top: -12px;
            left: 10px;
            color: red;
            font-size: 16px;
            font-weight: bold;
        }

        .cartoon-eyes {
            display: flex;
            gap: 10px;
            justify-content: center;
            padding-top: 15px;
        }

        .cartoon-eye {
            width: 10px;
            height: 10px;
            background: #333;
            border-radius: 50%;
            animation: blink 3s infinite;
        }

        .cartoon-mouth {
            width: 20px;
            height: 10px;
            background: transparent;
            border-bottom: 3px solid #333;
            border-radius: 0 0 20px 20px;
            margin: 5px auto 0;
        }

        .cartoon-message {
            font-size: 14px;
            line-height: 1.5;
            margin: 5px 0;
        }

        .cartoon-message p {
            margin: 5px 0;
        }

        .cartoon-close {
            position: absolute;
            top: 5px;
            right: 10px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            opacity: 0.7;
        }

        .cartoon-close:hover {
            opacity: 1;
        }

        .cartoon-dots {
            display: flex;
            gap: 5px;
            margin-top: 10px;
            justify-content: center;
        }

        .cartoon-dot {
            width: 8px;
            height: 8px;
            background: #FFD700;
            border-radius: 50%;
            animation: dotPulse 1.5s infinite;
        }

        .cartoon-dot:nth-child(2) { animation-delay: 0.3s; }
        .cartoon-dot:nth-child(3) { animation-delay: 0.6s; }

        @keyframes dotPulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.3); opacity: 1; }
        }

        @keyframes blink {
            0%, 90%, 100% { transform: scaleY(1); }
            95% { transform: scaleY(0.1); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .tour-highlight {
            position: relative;
            z-index: 1000;
            box-shadow: 0 0 0 4px #FFD700, 0 0 20px gold;
            transition: box-shadow 0.3s ease;
        }

        /* ===== CODE OVERLAY ===== */
        #code-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(8px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            flex-direction: column;
            padding: 20px;
        }
        
        .code-box {
            background: var(--panel-black);
            border: 2px solid var(--gold-dark);
            border-radius: 20px;
            padding: 40px 30px;
            max-width: 450px;
            width: 100%;
            text-align: center;
            box-shadow: 0 0 50px rgba(212,175,55,0.3);
            position: relative;
            overflow: hidden;
        }
        
        .code-box::before {
            content: '';
            position: absolute;
            top: -2px; left: -2px; right: -2px; height: 3px;
            background: linear-gradient(90deg, transparent, var(--gold-shine), transparent);
            animation: scan 3s linear infinite;
        }
        
        @keyframes scan {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .code-box h2 {
            color: var(--gold-shine);
            font-family: 'Cinzel', serif;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }
        
        .pricing-info {
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid var(--gold-dark);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }
        
        .pricing-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            padding: 10px;
            border-left: 3px solid var(--gold-primary);
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
        }
        
        .pricing-item i {
            color: var(--gold-primary);
            font-size: 1.2rem;
            width: 25px;
        }
        
        .pricing-item strong {
            color: var(--gold-shine);
        }
        
        .pricing-note {
            color: #aaa;
            font-size: 0.9rem;
            margin-top: 15px;
            font-style: italic;
        }
        
        .code-input {
            width: 100%;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--gold-dark);
            border-radius: 8px;
            color: white;
            font-size: 1.2rem;
            text-align: center;
            letter-spacing: 2px;
            margin-bottom: 20px;
            transition: 0.3s;
        }
        
        .code-input:focus {
            outline: none;
            border-color: var(--gold-primary);
            box-shadow: 0 0 15px rgba(212,175,55,0.3);
        }
        
        .btn-code {
            background: linear-gradient(135deg, #8B6914, #D4AF37);
            border: none; color: #000; font-weight: bold; padding: 15px; width: 100%;
            border-radius: 8px; font-size: 1.2rem; cursor: pointer; transition: 0.3s;
            font-family: 'Cinzel', serif; letter-spacing: 2px; margin-bottom: 20px;
        }
        
        .btn-code:hover {
            transform: scale(1.02);
            box-shadow: 0 0 20px var(--gold-dark);
        }
        
        .whatsapp-code-btn {
            background: #25D366; color: white; border: none; padding: 12px; width: 100%;
            border-radius: 8px; font-size: 1.1rem; cursor: pointer; transition: 0.3s;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        
        .whatsapp-code-btn:hover {
            background: #128C7E; transform: scale(1.02);
        }
        
        .error-message {
            color: #ff6b6b; margin-top: 10px; font-size: 0.9rem; min-height: 20px;
        }

        /* ===== MAIN CONTENT ===== */
        #main-content { display: none; position: relative; z-index: 1; }

        /* ===== INTRO ANIMATION ===== */
        #intro-overlay {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: #000; z-index: 9999; display: none;
            flex-direction: column; justify-content: center; align-items: center;
        }
        
        .mystic-circle {
            width:150px; height:150px;
            border:2px solid transparent; border-top:2px solid var(--gold-primary); border-bottom:2px solid var(--gold-primary);
            border-radius:50%; animation:spin 2s linear infinite; position:relative;
            box-shadow:0 0 20px var(--gold-dark);
        }
        
        .mystic-circle::before {
            content:''; position:absolute; top:10px; left:10px; right:10px; bottom:10px;
            border:2px solid transparent; border-left:2px solid var(--gold-shine); border-right:2px solid var(--gold-shine);
            border-radius:50%; animation:spinReverse 3s linear infinite;
        }
        
        .intro-text {
            margin-top:30px; font-family:'Cinzel',serif; font-size:1.5rem; color:var(--gold-shine);
            letter-spacing:3px; animation:pulseText 2s infinite; text-align:center;
        }
        
        @keyframes spin { 0%{transform:rotate(0);}100%{transform:rotate(360deg);} }
        @keyframes spinReverse { 0%{transform:rotate(360deg);}100%{transform:rotate(0);} }
        @keyframes pulseText { 0%,100%{opacity:0.5;}50%{opacity:1;text-shadow:0 0 10px var(--gold-primary);} }

        /* ===== HEADER ===== */
        header {
            text-align:center; padding:40px 20px;
            border-bottom:1px solid rgba(212,175,55,0.3);
            background:linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
        }
        
        .dr-title {
            font-family:'Cinzel',serif; font-size:2.8rem;
            background:linear-gradient(to right, #BF953F, #FCF6BA, #B38728, #FBF5B7, #AA771C);
            -webkit-background-clip:text; color:transparent; margin:0;
            text-shadow:0 0 20px rgba(0,0,0,0.8); font-weight:900; letter-spacing:2px;
        }
        
        .subtitle {
            font-family:'Playfair Display',serif; color:var(--text-gold); font-style:italic;
            letter-spacing:1px; margin-top:5px;
        }

        /* ===== SERVICE MENU ===== */
        .service-menu {
            display:flex; justify-content:center; gap:15px; flex-wrap:wrap; margin:30px auto; padding:0 15px;
        }
        
        .btn-service {
            background:rgba(0,0,0,0.5); border:1px solid var(--gold-dark); color:var(--text-gold);
            padding:12px 25px; border-radius:50px; cursor:pointer; font-family:'Cinzel',serif; font-weight:bold;
            transition:all 0.4s ease; text-transform:uppercase; letter-spacing:1px; backdrop-filter:blur(5px);
        }
        
        .btn-service:hover, .btn-service.active {
            background:var(--gold-primary); color:#000; box-shadow:0 0 15px var(--gold-dark); transform:translateY(-3px);
        }

        /* ===== CONTAINERS ===== */
        .container {
            width:95%; max-width:650px; margin:20px auto 60px; background:var(--panel-black);
            padding:40px; border-radius:10px; border:1px solid var(--gold-dark);
            box-shadow:0 20px 50px rgba(0,0,0,0.7); position:relative; overflow:hidden;
        }
        
        .container::before {
            content:''; position:absolute; top:0; left:0; width:100%; height:3px;
            background:linear-gradient(90deg, transparent, var(--gold-shine), transparent);
        }
        
        h2 {
            color:var(--gold-shine); text-align:center; font-family:'Cinzel',serif;
            border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; margin-bottom:25px;
        }
        
        label {
            display:block; margin-top:20px; color:var(--gold-primary); font-weight:600;
            font-size:0.9rem; text-transform:uppercase; letter-spacing:1px;
        }
        
        input, select, textarea {
            width:100%; padding:15px; margin-top:10px; border-radius:5px; border:1px solid #333;
            background:rgba(255,255,255,0.05); color:#fff; font-family:'Poppins',sans-serif; font-size:1rem; transition:0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline:none; border-color:var(--gold-primary); background:rgba(0,0,0,0.8);
            box-shadow:0 0 10px rgba(212,175,55,0.2);
        }
        
        .btn-magic {
            background:linear-gradient(135deg, #8B6914, #D4AF37, #8B6914); background-size:200% auto;
            color:#fff; padding:18px; border:none; border-radius:5px; font-weight:900; font-family:'Cinzel',serif;
            text-transform:uppercase; letter-spacing:2px; cursor:pointer; width:100%; margin-top:30px;
            transition:0.5s; box-shadow:0 5px 15px rgba(0,0,0,0.5);
        }
        
        .btn-magic:hover {
            background-position:right center; box-shadow:0 0 25px var(--gold-dark); transform:scale(1.02);
        }

        /* ===== NEXT PAGE BUTTON ===== */
        .btn-next-page {
            background:linear-gradient(45deg, #800000, #b30000);
            border:2px solid var(--gold-shine); color:white; padding:20px; display:block; text-align:center;
            text-decoration:none; font-family:'Cinzel',serif; font-size:1.2rem; font-weight:bold;
            border-radius:8px; margin-top:20px; animation:pulseBtn 2s infinite; position:relative; overflow:hidden;
        }
        
        .btn-next-page::after {
            content:''; position:absolute; top:-50%; left:-50%; width:200%; height:200%;
            background:linear-gradient(transparent, rgba(255,255,255,0.3), transparent);
            transform:rotate(45deg); animation:shine 3s infinite;
        }
        
        .btn-next-page:hover {
            background:linear-gradient(45deg, #b30000, #ff0000);
            box-shadow:0 0 30px rgba(255,0,0,0.6); transform:scale(1.05);
        }
        
        @keyframes pulseBtn {
            0%{box-shadow:0 0 0 0 rgba(255,215,0,0.4);}
            70%{box-shadow:0 0 0 15px rgba(255,215,0,0);}
            100%{box-shadow:0 0 0 0 rgba(255,215,0,0);}
        }
        
        @keyframes shine { 0%{left:-100%;}100%{left:100%;} }

        /* ===== CARDS ===== */
        #cards-container {
            display:none; gap:25px; flex-wrap:wrap; justify-content:center; padding:20px; max-width:1200px; margin:0 auto;
        }
        
        .card {
            width:300px; height:450px; perspective:1500px; cursor:pointer; transition:all 0.3s;
        }
        
        .card.expanded {
            width:90%; max-width:600px; height:80vh; z-index:1000; position:fixed; top:50%; left:50%;
            transform:translate(-50%, -50%);
        }
        
        .card-inner {
            position:relative; width:100%; height:100%; transition:transform 0.8s; transform-style:preserve-3d;
            box-shadow:0 10px 30px rgba(0,0,0,0.8); border-radius:15px;
        }
        
        .card.flipped .card-inner { transform:rotateY(180deg); }
        
        .card-back {
            position:absolute; width:100%; height:100%; backface-visibility:hidden; border-radius:15px;
            background-size:cover; background-position:center; display:flex; flex-direction:column;
            justify-content:flex-end; border:2px solid var(--gold-dark);
        }
        
        .card-back::before {
            content:''; position:absolute; top:0; left:0; width:100%; height:100%;
            background:linear-gradient(to top, rgba(0,0,0,1), rgba(0,0,0,0.3));
        }
        
        .card-back-content {
            position:relative; z-index:2; padding:20px; text-align:center;
        }
        
        .card-title-back {
            font-family:'Cinzel',serif; color:var(--gold-shine); font-size:1.4rem; font-weight:bold;
            text-shadow:0 2px 5px rgba(0,0,0,1);
        }
        
        .card-hint { font-size:0.8rem; color:#ccc; }
        
        .card-front {
            position:absolute; width:100%; height:100%; backface-visibility:hidden; border-radius:15px;
            background:#111; transform:rotateY(180deg); overflow-y:auto; border:2px solid var(--gold-shine);
            display:flex; flex-direction:column;
        }
        
        .card-header-img {
            height:150px; width:100%; object-fit:cover; border-bottom:2px solid var(--gold-primary);
        }
        
        .card-body { padding:20px; }
        
        .card-body h3 {
            color:var(--gold-shine); font-family:'Cinzel',serif; border-bottom:1px solid #333;
            padding-bottom:10px; margin-top:0;
        }
        
        .good-traits, .bad-traits {
            margin: 10px 0;
        }
        
        .good-traits span, .bad-traits span {
            display: inline-block; margin: 3px; padding:4px 10px; border-radius:20px; font-size:0.8rem;
        }
        
        .good-traits span { background:rgba(46, 125, 50, 0.3); border:1px solid #2e7d32; }
        .bad-traits span { background:rgba(211, 47, 47, 0.3); border:1px solid #d32f2f; }
        
        .close-card {
            position:absolute; top:10px; right:10px; background:rgba(0,0,0,0.7); color:white;
            width:30px; height:30px; border-radius:50%; text-align:center; line-height:30px;
            cursor:pointer; z-index:10; border:1px solid white; font-weight:bold;
        }

        /* ===== WHATSAPP FLOAT ===== */
        .whatsapp-float {
            position:fixed; bottom:20px; right:20px; background:#25D366; color:white; width:60px; height:60px;
            border-radius:50%; display:flex; justify-content:center; align-items:center; font-size:30px;
            box-shadow:0 5px 20px rgba(0,0,0,0.5); cursor:pointer; z-index:1000; transition:transform 0.3s;
        }
        
        .whatsapp-float:hover { transform:scale(1.1); }
        
        .send-btn {
            background:linear-gradient(45deg, #11998e, #38ef7d); color:white; padding:15px; border:none;
            border-radius:50px; font-weight:bold; width:100%; font-size:1.1rem; cursor:pointer;
            box-shadow:0 0 20px rgba(56,239,125,0.3);
        }

        /* ===== HUDUMA ===== */
        .services-container {
            margin-top:100px; margin-bottom:50px; padding:20px; text-align:center; position:relative; z-index:1;
        }
        
        .section-title {
            color:#D4AF37; font-family:'Cinzel',serif; font-size:2rem; margin-bottom:40px;
            letter-spacing:2px; text-shadow:0 0 10px rgba(212,175,55,0.5);
        }
        
        .services-grid {
            display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:25px;
            max-width:1000px; margin:0 auto;
        }
        
        .service-box {
            position:relative; height:250px; border-radius:15px; overflow:hidden; text-decoration:none;
            box-shadow:0 10px 20px rgba(0,0,0,0.7); transition:transform 0.4s, box-shadow 0.4s;
            border:1px solid var(--gold-dark); display:block;
        }
        
        .service-box:hover {
            transform:translateY(-10px) scale(1.02); box-shadow:0 20px 30px rgba(212,175,55,0.3);
            border-color:var(--gold-shine);
        }
        
        .service-box img {
            width:100%; height:100%; object-fit:cover; filter:brightness(50%);
            transition:filter 0.4s, transform 0.4s;
        }
        
        .service-box:hover img {
            filter:brightness(70%); transform:scale(1.05);
        }
        
        .service-box span {
            position:absolute; bottom:0; left:0; right:0; color:white; font-weight:bold; font-size:1.2rem;
            text-shadow:2px 2px 8px black; background:linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            padding:20px 5px 10px; text-align:center;
        }

        @media (max-width:768px) {
            .dr-title { font-size:1.8rem; }
            .card.expanded { width:95%; height:80vh; }
            .whatsapp-float { width:50px; height:50px; font-size:25px; bottom:10px; right:10px; }
            .services-grid { grid-template-columns:repeat(2,1fr); }
            .service-box { height:200px; }
            #install-button { padding:12px 25px; font-size:1.1rem; }
            .cartoon-assistant { max-width: 250px; left: 10px; bottom: 80px; }
        }
    </style>
</head>
<body>

<!-- KITUFE CHA KUSAKINISHA -->
<div class="install-container" id="install-container">
    <button id="install-button">
        <i class="fas fa-download"></i> SAKINISHA APP HII ‚ú¶ BURE
    </button>
</div>

<!-- CODE OVERLAY -->
<div id="code-overlay">
    <div class="code-box">
        <h2><i class="fas fa-lock"></i> KILINGE CHA DR WILLIAM KIMEFUNGWA INGIZA CODE</h2>
        
        <!-- MAELEZO YA BEI (HAKUNA CODES) -->
        <div class="pricing-info">
            <div class="pricing-item">
                <i class="fas fa-star"></i>
                <div><strong>BRONZE</strong> - Tsh 2,500<small>/mwezi</small><br><span style="color: #aaa; font-size: 0.8rem;">Fungua kwa siku 30</span></div>
            </div>
            <div class="pricing-item">
                <i class="fas fa-gem"></i>
                <div><strong>SILVER</strong> - Tsh 5,000<small>/mwaka</small><br><span style="color: #aaa; font-size: 0.8rem;">Fungua kwa mwaka mzima</span></div>
            </div>
            <div class="pricing-note">
                <i class="fas fa-info-circle"></i> Lipia kupitia LIPA NAMBA YA TIGO 17826666 Au Tuma neno WhatsApp no. 0762286282 kwa Msaada zaidi.
            </div>
        </div>

        <!-- SEHEMU YA KUINGIZIA CODE -->
        <input type="text" id="access-code" class="code-input" placeholder="INGIZA CODE ULIYOPEWA" maxlength="4" autocomplete="off">
        <button class="btn-code" onclick="verifyCode()">FUNGUA KILINGE</button>
        <div class="error-message" id="code-error"></div>
        
        <!-- KITUFE CHA WHATSAPP -->
        <button class="whatsapp-code-btn" onclick="requestCodeViaWhatsApp()">
            <i class="fab fa-whatsapp"></i> NIMELIPIA - NIPE CODE
        </button>
    </div>
</div>

<!-- CARTOON ASSISTANT -->
<div id="cartoon-assistant" class="cartoon-assistant hidden">
    <div class="cartoon-box">
        <span class="cartoon-close" onclick="hideCartoon()">√ó</span>
        <div class="cartoon-avatar">
            <div class="cartoon-face">
                <div class="cartoon-hat"></div>
                <div class="cartoon-eyes">
                    <div class="cartoon-eye"></div>
                    <div class="cartoon-eye"></div>
                </div>
                <div class="cartoon-mouth"></div>
            </div>
            <div style="font-weight: bold;">Msaidizi App</div>
        </div>
        <div id="cartoon-message" class="cartoon-message">
            <p>üëã Habari! Mimi ni msaidizi wako.</p>
            <p>Nitakueleza jinsi ya kutumia Kilinge cha DR WILLIAM MZEE WA HEKIMA NA MAARIFA YA AFYA ZOTE...</p>
        </div>
        <div class="cartoon-dots">
            <span class="cartoon-dot"></span>
            <span class="cartoon-dot"></span>
            <span class="cartoon-dot"></span>
        </div>
    </div>
</div>

<!-- MAIN CONTENT -->
<div id="main-content">
    <div id="intro-overlay">
        <div class="mystic-circle"></div>
        <div class="intro-text" id="intro-text-content">KILINGE KINAFUNGUKA...</div>
    </div>

    <header>
        <h1 class="dr-title">DR. WILLIAM MTANZANIA WA U.S.A</h1>
        <p class="subtitle">Kilinge cha Tiba na Ramli za Asili</p>
    </header>

    <div class="service-menu">
        <button id="btn-ramli" class="btn-service active" onclick="switchPage('ramli', this)"><i class="fas fa-star"></i> Ramli</button>
        <button id="btn-miadi" class="btn-service" onclick="switchPage('appointment', this)"><i class="fas fa-calendar-check"></i> Miadi</button>
        <button id="btn-dawa" class="btn-service" onclick="switchPage('dawa', this)"><i class="fas fa-flask"></i> Dawa</button>
        <button id="btn-maoni" class="btn-service" onclick="switchPage('malalamiko', this)"><i class="fas fa-comment-dots"></i> Maoni</button>
    </div>

    <!-- PAGE: RAMLI -->
    <div id="page-ramli" class="container">
        <h2><i class="fas fa-sun"></i> IJUE NYOTA YAKO HAPA </h2>
        <label>Jina lako Kamili:</label> <input type="text" id="full-name" placeholder="Mfano: JUMA HASSAN">
        <label>Jinsia:</label>
        <select id="gender">
            <option value="Mwanaume">Mwanaume</option>
            <option value="Mwanamke">Mwanamke</option>
        </select>
        <label>Tarehe ya Kuzaliwa:</label>
        <div style="display:flex; gap:10px;">
            <select id="birth-day"><script>for(let i=1;i<=31;i++) document.write(`<option value="${i}">${i}</option>`);</script></select>
            <select id="birth-month">
                <option value="1">Januari</option><option value="2">Februari</option><option value="3">Machi</option>
                <option value="4">Aprili</option><option value="5">Mei</option><option value="6">Juni</option>
                <option value="7">Julai</option><option value="8">Agosti</option><option value="9">Septemba</option>
                <option value="10">Oktoba</option><option value="11">Novemba</option><option value="12">Desemba</option>
            </select>
        </div>
        <button class="btn-magic" onclick="anzaRamli()">HAKIKI SASA</button>
    </div>

    <!-- PAGE: MIADI -->
    <div id="page-appointment" class="container" style="display:none;">
        <h2><i class="fas fa-handshake"></i> PANGA SIKU YA KUFIKA</h2>
        <label>Jina:</label> <input type="text" id="app-name">
        <label>Tarehe:</label> <input type="date" id="app-date">
        <label>Sababu:</label> <textarea id="app-reason" placeholder="Elezea shida yako..." rows="3"></textarea>
        <label>Simu:</label>
        <div style="display:flex; gap:10px;">
            <select style="width:30%"><option>+255</option><option>+254</option></select>
            <input type="tel" id="app-phone" placeholder="762xxxxxx" maxlength="9">
        </div>
        <button class="btn-magic" onclick="tumaWhatsApp('MIADI')">TUMA MIADI</button>
    </div>

    <!-- PAGE: DAWA -->
    <div id="page-dawa" class="container" style="display:none;">
        <h2><i class="fas fa-leaf"></i> ODA DAWA ASILIA</h2>
        <label>Chagua Dawa:</label>
        <select name="dawa_list" id="dawa_list">
            <option value="">-- Chagua Aina ya Dawa --</option>
            <option value="Dawa za minyoo">Dawa za minyoo za Asili</option>
            <option value="Dawa za maumivu na homa">Dawa za maumivu na homa za Asili</option>
            <option value="Dawa za antibiotiki">Dawa za antibiotiki za Asili</option>
            <option value="Dawa za malaria">Dawa za malaria za Asili</option>
            <option value="Dawa za fangasi">Dawa za fangasi za Asili</option>
            <option value="Dawa za virusi">Dawa za virusi za Asili</option>
            <option value="Dawa za kusafisha vidonda">Dawa za kusafisha vidonda za Asili</option>
            <option value="Dawa za vidonda vya tumbo">Dawa za vidonda vya tumbo za Asili</option>
            <option value="Dawa za kuhara">Dawa za kuhara za Asili</option>
            <option value="Dawa za kupunguza asidi">Dawa za kupunguza asidi mwilini za Asili</option>
            <option value="Dawa za kulainisha choo">Dawa za kulainisha choo za Asili</option>
            <option value="Dawa za kuzuia kutapika">Dawa za kuzuia kutapika za Asili</option>
            <option value="Dawa za bawasiri">Dawa za bawasiri za Asili</option>
            <option value="Dawa za gesi tumboni">Dawa za gesi tumboni za Asili</option>
            <option value="Dawa za kuongeza hamu ya kula">Dawa za kuongeza hamu ya kula za Asili</option>
            <option value="Dawa za kikohozi na mafua">Dawa za kikohozi na mafua za Asili</option>
            <option value="Dawa za mzio na aleji">Dawa za mzio na aleji za Asili</option>
            <option value="Dawa za pumu">Dawa za pumu za Asili</option>
            <option value="Dawa za kuzibua pua">Dawa za kuzibua pua za Asili</option>
            <option value="Dawa za kulegeza makohozi">Dawa za kulegeza makohozi</option>
            <option value="Dawa za shinikizo la damu">Dawa za shinikizo la damu za Asili</option>
            <option value="Dawa za kisukari">Dawa za kisukari za Asili</option>
            <option value="Dawa za kupunguza mafuta">Dawa za kupunguza mafuta/kolesto za Asili</option>
            <option value="Dawa za kifafa">Dawa za kifafa za Asili</option>
            <option value="Dawa za moyo">Dawa za moyo za Asili</option>
            <option value="Dawa za kusaidia figo">Dawa za kusaidia figo za Asili</option>
            <option value="Dawa za kansa">Dawa za kansa za Asili</option>
            <option value="Dawa za uzazi wa mpango">Dawa za uzazi wa mpango za Asili</option>
            <option value="Dawa za fangasi wa kike">Dawa za fangasi wa kike za Asili</option>
            <option value="Dawa za kurekebisha homoni">Dawa za kurekebisha homoni za Asili</option>
            <option value="Dawa za kuongeza rutuba">Dawa za kuongeza rutuba za Asili</option>
            <option value="Dawa za maumivu ya hedhi">Dawa za maumivu ya hedhi za Asili</option>
            <option value="Dawa za matatizo ya macho">Dawa za matatizo ya macho za Asili</option>
            <option value="Dawa za masikio">Dawa za masikio za Asili</option>
            <option value="Dawa za matatizo ya ngozi">Dawa za matatizo ya ngozi za Asili</option>
            <option value="Dawa za maumivu ya mifupa">Dawa za maumivu ya mifupa na viungo za Asili</option>
            <option value="Dawa za meno na fizi">Dawa za meno na fizi za Asili</option>
            <option value="Dawa za ganzi">Dawa za ganzi za Asili</option>
            <option value="Dawa za kuongeza damu">Dawa za kuongeza damu za Asili</option>
            <option value="Dawa za vitamini">Dawa za vitamini na virutubisho za Asili</option>
            <option value="Dawa za kuongeza kinga">Dawa za kuongeza kinga ya mwili za Asili</option>
            <option value="Dawa za kalsiamu">Dawa za kalsiamu na mifupa za Asili</option>
            <option value="Mafuta ya samaki">Mafuta ya samaki za Asili</option>
            <option value="Dawa za usingizi">Dawa za usingizi na wasiwasi za Asili</option>
            <option value="Dawa za sonona">Dawa za sonona za Asili</option>
            <option value="Dawa za kuacha kulevya">Dawa za kuacha kulevya za Asili</option>
            <option value="Dawa za kupunguza uzito">Dawa za kupunguza uzito za Asili</option>
            <option value="Dawa za kutoa sumu mwilini">Dawa za kutoa sumu mwilini za Asili</option>
            <option value="Dawa za baridi yabisi">Dawa za baridi yabisi za Asili</option>
            <option value="Dawa za kuongeza nguvu">Dawa za maji ya kuongeza nguvu za Asili</option>
        </select>
        <label>Mahali (Mkoa/Wilaya):</label> <input type="text" id="dawa-location">
        <label>Simu:</label> <input type="tel" id="dawa-phone" placeholder="762xxxxxx">
        <button class="btn-magic" onclick="tumaWhatsApp('DAWA')">AGIZA ODA SASA</button>
    </div>

    <!-- PAGE: MALALAMIKO -->
    <div id="page-malalamiko" class="container" style="display:none;">
        <h2><i class="fas fa-envelope-open-text"></i> ELEZEA MALALAMIKO YAKO</h2>
        <textarea id="msg-content" rows="5" placeholder="Tuandikie hapa..."></textarea>
        <button class="btn-magic" onclick="tumaWhatsApp('MAONI')">TUMA UJUMBE</button>
    </div>

    <!-- CARDS CONTAINER -->
    <div id="cards-container"></div>

    <!-- SEND RESULTS -->
    <div id="send-results-container" class="container" style="display:none; text-align:center;">
        <button class="send-btn" onclick="tumaMatokeoWhatsApp()">
            <i class="fab fa-whatsapp"></i> MSHIRIKISHE DAKTARI MAJIBU YA NYOTA YAKO
        </button>
    </div>

    <!-- NEXT PAGE -->
    <div id="next-page-container" class="container" style="display:none; text-align:center; border-color: #ff4444;">
        <h2 style="color: #ff4444;"><i class="fas fa-door-open"></i> KURASA YA KADI ZA SIKU</h2>
        <p style="color: #ccc;">Kuna siri zaidi kuhusu kadi yako ya siku...</p>
        <a href="https://biotech-america-reseach.github.io/orcle/" class="btn-next-page">
            KUJUA KADI ZAKO 3(Click here) <i class="fas fa-arrow-right"></i>
        </a>
    </div>

<!-- HUDUMA -->
<div class="services-container">
    <h2 class="section-title">KILINGE CHA KIROHO & USOMI</h2>
    <div class="services-grid">
        <a href="https://wasiliananadrktari.netlify.app/" class="service-box">
            <img src="https://images.unsplash.com/photo-1596526131083-e8c633c948d2?q=80&w=400&auto=format&fit=crop" loading="lazy" alt="Ongea na Dr William">
            <span>ONGEA NA DR WILLIAM HAPA</span>
        </a>
        <a href="https://vitabu.vercel.app/" class="service-box">
            <img src="https://images.unsplash.com/photo-1495446815901-a7297e633e8d?q=80&w=400&fit=crop" loading="lazy" alt="Duka la Vitabu">
            <span>DUKA LA VITABU</span>
        </a>
        <a href="#" class="service-box">
            <img src="https://images.unsplash.com/photo-1502444330042-d1a1ddf9bb5b?q=80&w=400&fit=crop" loading="lazy" alt="Huduma 3">
            <span>Ushauri wa Kiroho</span>
        </a>
        <a href="#" class="service-box">
            <img src="https://images.unsplash.com/photo-1506126613408-eca07ce68773?q=80&w=400&fit=crop" loading="lazy" alt="Huduma 4">
            <span>Visomo Maalum</span>
        </a>
        <a href="#" class="service-box">
            <img src="https://images.unsplash.com/photo-1515598344952-097560877960?q=80&w=400&fit=crop" loading="lazy" alt="Huduma 5">
            <span>Mafuta ya Baraka</span>
        </a>
        <a href="#" class="service-box">
            <img src="https://images.unsplash.com/photo-1532187875605-2fe358511423?q=80&w=400&fit=crop" loading="lazy" alt="Huduma 6">
            <span>Vitabu Zaidi</span>
        </a>
    </div>
</div>

<!-- WHATSAPP FLOAT -->
<div class="whatsapp-float" onclick="window.open('https://wa.me/255762286282', '_blank')">
    <i class="fab fa-whatsapp"></i>
</div>

<!-- SERVICE WORKER -->
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('sw.js').catch(err => console.log('SW failed', err));
        });
    }
</script>

<!-- PARALLAX -->
<script>
    window.addEventListener('scroll', () => {
        document.body.style.backgroundPosition = `center ${window.pageYOffset * 0.3}px`;
    });
</script>

<!-- MAIN SCRIPT -->
<script>
    // ==================== FUNCTIONS ZA MSINGI ====================
    function sanitizeHTML(str) {
        if (!str) return '';
        return String(str)
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#039;');
    }

    // ==================== KITUFE CHA KUSAKINISHA ====================
    const installContainer = document.getElementById('install-container');
    const installBtn = document.getElementById('install-button');
    let deferredPrompt;
    let installShown = false;

    window.addEventListener('appinstalled', () => {
        console.log('App imesakinishwa');
        hideInstallButton();
        if (installBtn) {
            installBtn.innerHTML = '<i class="fas fa-check"></i> IMEKWISHA SAKINISHA';
        }
    });

    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        
        if (!window.matchMedia('(display-mode: standalone)').matches && !installShown) {
            showInstallButton();
        }
    });

    function showInstallButton() {
        if (installContainer) {
            installContainer.classList.remove('hidden');
            installShown = true;
            
            setTimeout(() => {
                hideInstallButton();
            }, 10000);
        }
    }

    function hideInstallButton() {
        if (installContainer) {
            installContainer.classList.add('hidden');
        }
    }

    if (installBtn) {
        installBtn.addEventListener('click', async () => {
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            
            if (isIOS) {
                alert('üì± Kwa iPhone: Bofya ikoni ya "Share" chini, kisha chagua "Add to Home Screen".');
                hideInstallButton();
                return;
            }
            
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                
                if (outcome === 'accepted') {
                    console.log('Mtumiaji alikubali kusakinisha');
                    installBtn.innerHTML = '<i class="fas fa-check"></i> INAKUSAKINISHA...';
                    hideInstallButton();
                } else {
                    console.log('Mtumiaji alikataa kusakinisha');
                    hideInstallButton();
                }
                
                deferredPrompt = null;
            } else {
                alert('Ili kusakinisha, tumia Chrome au Safari kwenye simu. Au tafuta chaguo la "Install app" kwenye menyu.');
                hideInstallButton();
            }
        });
    }

    document.addEventListener('click', function(e) {
        if (e.target.closest('#install-button') || e.target.closest('#install-container')) {
            return;
        }
        
        setTimeout(() => {
            hideInstallButton();
        }, 2000);
    }, { once: true });

    window.addEventListener('scroll', function() {
        if (window.scrollY > 100) {
            hideInstallButton();
        }
    }, { once: true });

    if (window.matchMedia('(display-mode: standalone)').matches) {
        hideInstallButton();
    } else {
        setTimeout(() => {
            if (!installShown && deferredPrompt) {
                showInstallButton();
            }
        }, 3000);
    }

    // ==================== MFUMO WA MALIPO (MUDA HALISI) - CODES ZIMEFICHWA ====================
    // Codes zimefichwa kwa kutumia base64 ili zisionekane kwa urahisi.
    const encryptedCodes = 'eyJXMDAxIjp7ImRheXMiOjEsIm5hbWUiOiJSYXMtTW9qd28gKEJyb256ZSktU2lrdSAxIn0sIlcwMDIiOnsiZGF5cyI6MzAsIm5hbWUiOiJGZWZlIChTaWx2ZXIpIC0gTWltaSBpYSBTa3VsZSBuYSBTaWt1IDMwIn0sIlcwMDMiOnsiZGF5cyI6MzY1LCJuYW1lIjoiWmFoYWJpIChHb2xkKSAtIE13YWthIDEifX0=';
    const validCodes = JSON.parse(atob(encryptedCodes));

    function verifyCode() {
        const codeInput = document.getElementById('access-code');
        const errorDiv = document.getElementById('code-error');
        if (!codeInput || !errorDiv) return;
        
        const code = codeInput.value.trim().toUpperCase();
        
        if (validCodes[code]) {
            const selectedPlan = validCodes[code];
            
            const now = new Date().getTime();
            const expiryTime = now + (selectedPlan.days * 24 * 60 * 60 * 1000);
            
            localStorage.setItem('drWilliamAccess', 'true');
            localStorage.setItem('drWilliamExpiry', expiryTime.toString());
            localStorage.setItem('drWilliamPlan', selectedPlan.name);
            localStorage.setItem('drWilliamCode', code);
            
            document.getElementById('code-overlay').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            
            showRemainingTime();
            startCountdown();
            
            setTimeout(() => {
                startTourGuide();
            }, 1000);
            
        } else {
            errorDiv.innerText = '‚ùå Code si sahihi. Tafadhali omba code kupitia WhatsApp.';
            codeInput.classList.add('shake');
            setTimeout(() => codeInput.classList.remove('shake'), 500);
        }
    }

    function requestCodeViaWhatsApp() {
        const message = `Halo Dr.Bless, ninaomba code ya kufungua Kilinge. Nimetuma malipo. Jina langu: [ANDIKA JINA LAKO HAPA]`;
        window.open(`https://wa.me/255762286282?text=${encodeURIComponent(message)}`, '_blank');
    }

    function showRemainingTime() {
        const expiry = localStorage.getItem('drWilliamExpiry');
        const plan = localStorage.getItem('drWilliamPlan');
        
        if (!expiry) return;
        
        const now = new Date().getTime();
        const timeLeft = parseInt(expiry) - now;
        
        if (timeLeft <= 0) {
            logoutUser("‚è∞ MUDA WAKO UMEISHA! Tafadhali lipia tena kupata code mpya.");
            return;
        }
        
        const daysLeft = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hoursLeft = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutesLeft = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        
        let timerDiv = document.getElementById('timer-display');
        
        if (!timerDiv) {
            timerDiv = document.createElement('div');
            timerDiv.id = 'timer-display';
            timerDiv.onclick = showExpiryMessage;
            document.body.appendChild(timerDiv);
        }
        
        let timeText = '';
        if (daysLeft > 0) {
            timeText = `${daysLeft} siku ${hoursLeft} saa`;
        } else if (hoursLeft > 0) {
            timeText = `${hoursLeft} saa ${minutesLeft} dakika`;
        } else {
            timeText = `${minutesLeft} dakika`;
        }
        
        timerDiv.innerHTML = `‚è≥ Muda umebaki: ${timeText} | ${plan}`;
    }

    function startCountdown() {
        setInterval(function() {
            const expiry = localStorage.getItem('drWilliamExpiry');
            if (!expiry) return;
            
            const now = new Date().getTime();
            const timeLeft = parseInt(expiry) - now;
            
            if (timeLeft <= 0) {
                logoutUser("‚è∞ MUDA WAKO UMEISHA! Tafadhali lipia tena kupata code mpya.");
            } else {
                showRemainingTime();
            }
        }, 60000);
    }

    function logoutUser(message) {
        alert(message);
        
        localStorage.removeItem('drWilliamAccess');
        localStorage.removeItem('drWilliamExpiry');
        localStorage.removeItem('drWilliamPlan');
        localStorage.removeItem('drWilliamCode');
        
        const timerDiv = document.getElementById('timer-display');
        if (timerDiv) timerDiv.remove();
        
        document.getElementById('main-content').style.display = 'none';
        document.getElementById('code-overlay').style.display = 'flex';
    }

    function showExpiryMessage() {
        const expiry = localStorage.getItem('drWilliamExpiry');
        const plan = localStorage.getItem('drWilliamPlan');
        
        if (!expiry) return;
        
        const now = new Date().getTime();
        const timeLeft = parseInt(expiry) - now;
        const daysLeft = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hoursLeft = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutesLeft = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        
        let message = `‚è∞ MUDA WAKO ULIOSALIA:\n\n`;
        
        if (daysLeft > 0) {
            message += `${daysLeft} siku, ${hoursLeft} saa, ${minutesLeft} dakika\n\n`;
        } else if (hoursLeft > 0) {
            message += `${hoursLeft} saa, ${minutesLeft} dakika\n\n`;
        } else {
            message += `${minutesLeft} dakika\n\n`;
        }
        
        message += `Ulipochagua mpango wa: ${plan}\n\n`;
        message += `üí° UKITAKA KUONGEZA MUDA:\n`;
        message += `Tuma malipo kupitia WhatsApp 0762286282`;
        
        alert(message);
    }

    function checkAccessOnLoad() {
        const access = localStorage.getItem('drWilliamAccess');
        const expiry = localStorage.getItem('drWilliamExpiry');
        
        if (access === 'true' && expiry) {
            const now = new Date().getTime();
            const timeLeft = parseInt(expiry) - now;
            
            if (timeLeft > 0) {
                document.getElementById('code-overlay').style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
                showRemainingTime();
                startCountdown();
                
                setTimeout(() => {
                    showCartoon("üëã Karibu tena! Furahia matumizi yako.");
                }, 1000);
                
                return true;
            } else {
                localStorage.removeItem('drWilliamAccess');
                localStorage.removeItem('drWilliamExpiry');
                localStorage.removeItem('drWilliamPlan');
                localStorage.removeItem('drWilliamCode');
            }
        }
        
        document.getElementById('code-overlay').style.display = 'flex';
        document.getElementById('main-content').style.display = 'none';
        
        setTimeout(() => {
            showPreAccessCartoon();
        }, 500);
        
        return false;
    }

    // ==================== KAROBOTI ====================
    function showCartoon(message, autoHide = true) {
        const cartoon = document.getElementById('cartoon-assistant');
        const messageEl = document.getElementById('cartoon-message');
        
        if (!cartoon || !messageEl) return;
        
        messageEl.innerHTML = `<p>${message.replace(/\n/g, '</p><p>')}</p>`;
        cartoon.classList.remove('hidden');
        
        if (autoHide) {
            setTimeout(() => {
                cartoon.classList.add('hidden');
            }, 8000);
        }
        
        return cartoon;
    }

    function hideCartoon() {
        const cartoon = document.getElementById('cartoon-assistant');
        if (cartoon) cartoon.classList.add('hidden');
    }

    function showPreAccessCartoon() {
        const message = `üëã Karibu kwenye Kilinge cha Mzee/Dr. William!\n\n` +
                       `üí∞ BEI ZA KIFRUSHI:\n` +
                       `‚ñ™Ô∏è Bronze: LIPA Tsh 2,500 - Mwezi 1\n` +
                       `‚ñ™Ô∏è Silver: LIPIA Tsh 5,000 - Mwaka 1\n\n` +
                       `üì≤ Baada ya malipo, Omba CODE kwa WhatsApp namba.\n` +
                       `0762286282 na Kilinge App itafunguka.`;
        
        showCartoon(message, false);
    }

    function startTourGuide() {
        const steps = [
            { element: null, message: "üëã Karibu! Mimi ni msaidizi wako. Nitakuelezea sehemu mbalimbali za Kilinge." },
            { element: '#btn-ramli', message: "üîÆ Hii ni sehemu ya RAMLI - Hapa utajua nyota yako na sifa zako." },
            { element: '#btn-miadi', message: "üìÖ Hii ni sehemu ya MIADI - Unaweza kupanga miadi ya kufika kliniki." },
            { element: '#btn-dawa', message: "üíä Hii ni sehemu ya DAWA - Unaweza kuagiza dawa asilia." },
            { element: '#btn-maoni', message: "‚úçÔ∏è Hii ni sehemu ya MAONI - Tuma maoni au malalamiko yako." },
            { element: null, message: "‚ú® Kila sehemu ina kazi yake. Bonyeza kitufe chochote kuanza.\n\nFurahia matumizi yako!" }
        ];

        let stepIndex = 0;

        function showNextTourStep() {
            if (stepIndex >= steps.length) {
                hideCartoon();
                
                document.querySelectorAll('.btn-service').forEach(el => {
                    el.classList.remove('tour-highlight');
                });
                return;
            }

            const step = steps[stepIndex];
            
            document.querySelectorAll('.btn-service').forEach(el => {
                el.classList.remove('tour-highlight');
            });

            if (step.element) {
                const element = document.querySelector(step.element);
                if (element) {
                    element.classList.add('tour-highlight');
                }
            }

            showCartoon(step.message, false);
            
            stepIndex++;
            
            setTimeout(showNextTourStep, 5000);
        }

        setTimeout(showNextTourStep, 1000);
    }

    // ==================== DATA ZA ZODIAC (1-12) - TOLEO LA MSINGI LINALOFANYA KAZI ====================
    const ZODIAC_DB = {
        1: { 
            name: "Nyota yako ni Kondoo (Aries)", 
            image: "https://images.unsplash.com/photo-1533036696707-887498c25389?auto=format&fit=crop&w=600&q=80",
            good: ["UJASIRI WA KIPEKEE", "UONGOZI WA ASILI", "SHAUKU INAYOWASHA MOTO"],
            bad: ["HASIRA KALI", "KUKOSA SUBIRA", "KUKOSA HURUMA"],
            health: ["Shinikizo la damu", "Maumivu ya kichwa", "Maumivu ya mgongo"],
            avoid: ["Pombe kali", "Sigara", "Vyakula vya mafuta mengi"],
            compatible: ["Simba", "Mshale", "Mapacha"],
            careers: ["Kamanda wa Jeshi", "Mwanasiasa", "Mjasiriamali"],
            avoid_careers: ["Mhasibu", "Karani", "Mtunza maktaba"]
        },
        2: { 
            name: "Nyota yako ni Ng'ombe (Taurus)", 
            image: "https://images.unsplash.com/photo-1516467508483-a7212febe31a?auto=format&fit=crop&w=600&q=80",
            good: ["UVUMILIVU", "UAMINIFU", "UTHABITI"],
            bad: ["UKAIDI", "UCHU WA MALI", "WIVU"],
            health: ["Matatizo ya koo", "Shinikizo la damu", "Matatizo ya meno"],
            avoid: ["Pombe", "Vyakula vitamu", "Chumvi nyingi"],
            compatible: ["Mashujaa", "Mbuzi", "Kaa"],
            careers: ["Meneja wa Benki", "Mfanyabiashara", "Mkulima"],
            avoid_careers: ["Rubani", "Mwigizaji", "Mwanamuziki"]
        },
        3: { 
            name: "Nyota yako ni Mapacha (Gemini)", 
            image: "https://images.unsplash.com/photo-1508138221679-760a23a2285b?auto=format&fit=crop&w=600&q=80",
            good: ["MWASILIANO MAHIRI", "UBUNIFU", "UCHANGAMFU"],
            bad: ["KUKOSA UTULIVU", "UONGO", "KUSEMA BILA KUFIKIRIA"],
            health: ["Msongo wa akili", "Matatizo ya mapafu", "Mzio"],
            avoid: ["Kahawa nyingi", "Sukari", "Kukaa usiku"],
            compatible: ["Mizani", "Ndoo", "Simba"],
            careers: ["Mwandishi wa Habari", "Mtangazaji", "Programu"],
            avoid_careers: ["Mhasibu", "Mkulima", "Mfanyakazi wa kiwanda"]
        },
        4: { 
            name: "Nyota yako ni Kaa (Cancer)", 
            image: "https://images.unsplash.com/photo-1518837695005-2083093ee35b?auto=format&fit=crop&w=600&q=80",
            good: ["UPENDO WA FAMILIA", "HURUMA", "UAMINIFU"],
            bad: ["KUHISI KWA KUPINDUKIA", "WIVU", "KUSHIKILIA MAUMIVU"],
            health: ["Matatizo ya tumbo", "Msongo wa akili", "Kukosa usingizi"],
            avoid: ["Maziwa mengi", "Pombe", "Kukaa usiku"],
            compatible: ["Nge", "Samaki", "Mashujaa"],
            careers: ["Daktari wa watoto", "Mpishi", "Mshauri wa familia"],
            avoid_careers: ["Mwanajeshi", "Rubani", "Mfanyabiashara wa hatari"]
        },
        5: { 
            name: "Nyota yako ni Simba (Leo)", 
            image: "https://images.unsplash.com/photo-1546182990-dffeafbe841d?auto=format&fit=crop&w=600&q=80",
            good: ["UONGOZI", "UKARIMU", "UJASIRI"],
            bad: ["KIBURI", "KUTAKA KUTAWALA", "KUTOKUVUMILIA UKOSO"],
            health: ["Shinikizo la damu", "Maumivu ya kichwa", "Magonjwa ya moyo"],
            avoid: ["Pombe", "Sigara", "Vyakula vya mafuta"],
            compatible: ["Mshale", "Kondoo", "Mapacha"],
            careers: ["Mwigizaji", "Mwanamuziki", "Kiongozi"],
            avoid_careers: ["Mkulima", "Mfanyakazi wa usafi", "Mchambuzi wa data"]
        },
        6: { 
            name: "Nyota yako ni Mashujaa (Virgo)", 
            image: "https://images.unsplash.com/photo-1516891349404-07d7f5cdb5bb?auto=format&fit=crop&w=600&q=80",
            good: ["MPANGALIZI", "UMAKINI", "UAMINIFU"],
            bad: ["UKOSAJI", "WASIWASI", "KUTOKURIDHIKA"],
            health: ["Matatizo ya tumbo", "Mzio", "Msongo wa akili"],
            avoid: ["Kahawa", "Vyakula vya mafuta", "Sukari"],
            compatible: ["Ng'ombe", "Mbuzi", "Nge"],
            careers: ["Daktari", "Mtafiti", "Mchambuzi"],
            avoid_careers: ["Msanii", "Mwanamuziki", "Rubani"]
        },
        7: { 
            name: "Nyota yako ni Mizani (Libra)", 
            image: "https://images.unsplash.com/photo-1504887764023-6f27056d186c?auto=format&fit=crop&w=600&q=80",
            good: ["HESHIMA YA HAKI", "DIPLOMASIA", "UPENDO WA UZURI"],
            bad: ["KUSHINDWA KUFANYA UAMUZI", "KUTEGEMEA KIBALI", "KUKWEPA MIGOGORO"],
            health: ["Shinikizo la damu", "Maumivu ya kichwa", "Matatizo ya figo"],
            avoid: ["Kahawa nyingi", "Sukari", "Chumvi"],
            compatible: ["Mapacha", "Ndoo", "Kondoo"],
            careers: ["Jaji", "Mwanasheria", "Mwanadiplomasia"],
            avoid_careers: ["Mzimamoto", "Rubani", "Mfanyakazi wa ujenzi"]
        },
        8: { 
            name: "Nyota yako ni Nge (Scorpio)", 
            image: "https://images.unsplash.com/photo-1534180477871-5d6cc81f3920?auto=format&fit=crop&w=600&q=80",
            good: ["UAMINIFU", "UCHUNGUZI", "NGUVU YA KUVUMILIA"],
            bad: ["WIVU", "KUTAKA KULIPIZA KISASI", "KUSHIKILIA CHUKI"],
            health: ["Matatizo ya mapafu", "Msongo wa akili", "Shinikizo la damu"],
            avoid: ["Pombe", "Sigara", "Vyakula vya mafuta"],
            compatible: ["Kaa", "Samaki", "Ng'ombe"],
            careers: ["Mpelelezi", "Daktari wa upasuaji", "Mtafiti"],
            avoid_careers: ["Msanii", "Mwanamuziki", "Mwigizaji"]
        },
        9: { 
            name: "Nyota yako ni Mshale (Sagittarius)", 
            image: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=600&q=80",
            good: ["UPENDO WA SAFARI", "UCHANGAMFU", "UJASIRI"],
            bad: ["KUKOSA UTULIVU", "KUSEMA BILA KUFIKIRIA", "KUTOWEKA AKIBA"],
            health: ["Maumivu ya miguu", "Maumivu ya kichwa", "Matatizo ya mapafu"],
            avoid: ["Pombe", "Sigara", "Vyakula vya mafuta"],
            compatible: ["Kondoo", "Simba", "Mapacha"],
            careers: ["Rubani", "Mwongozi wa safari", "Mwalimu"],
            avoid_careers: ["Mhasibu", "Karani", "Mtunza maktaba"]
        },
        10: { 
            name: "Nyota yako ni Mbuzi (Capricorn)", 
            image: "https://images.unsplash.com/photo-1516483638261-f4dbaf036963?auto=format&fit=crop&w=600&q=80",
            good: ["AZIMIO", "HECMA YA KIFEDHA", "NIDHAMU"],
            bad: ["UKALI", "KUJIPAKIA MZIGO", "KUSHINDWA KUONYESHA HISIA"],
            health: ["Matatizo ya mifupa", "Shinikizo la damu", "Maumivu ya mgongo"],
            avoid: ["Vyakula vya mafuta", "Sukari", "Chumvi"],
            compatible: ["Ng'ombe", "Mashujaa", "Nge"],
            careers: ["Mkurugenzi", "Mfanyabiashara", "Mhandisi"],
            avoid_careers: ["Msanii", "Mwanamuziki", "Rubani"]
        },
        11: { 
            name: "Nyota yako ni Ndoo (Aquarius)", 
            image: "https://images.unsplash.com/photo-1523362628745-0c100150b504?auto=format&fit=crop&w=600&q=80",
            good: ["UBUNIFU", "UPENDO WA HAKI", "URAFIKI"],
            bad: ["KUKOSA HISIA", "KUJITENGA", "KUPINGA MFUMO"],
            health: ["Matatizo ya mapafu", "Msongo wa akili", "Matatizo ya mzunguko wa damu"],
            avoid: ["Kahawa", "Sukari", "Vyakula vya mafuta"],
            compatible: ["Mapacha", "Mizani", "Kondoo"],
            careers: ["Mvumbuzi", "Mwanasayansi", "Mwanadiplomasia"],
            avoid_careers: ["Mhasibu", "Mfanyakazi wa kiwanda", "Mlinzi"]
        },
        12: { 
            name: "Nyota yako ni Samaki (Pisces)", 
            image: "https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&w=600&q=80",
            good: ["HURUMA", "UBUNIFU WA KISANII", "INTUITION"],
            bad: ["KUKIMBIA UKWELI", "KUHUSUDIKA KWA URAHISI", "KUKOSA MIPAKA"],
            health: ["Matatizo ya miguu", "Matatizo ya mapafu", "Msongo wa akili"],
            avoid: ["Pombe", "Sigara", "Vyakula vya mafuta"],
            compatible: ["Kaa", "Nge", "Ng'ombe"],
            careers: ["Msanii", "Mwanamuziki", "Mshairi"],
            avoid_careers: ["Mhasibu", "Mfanyabiashara", "Mkurugenzi"]
        }
    };
        
    const HERUFI_DB = {
        'A': ["Una sifa za uongozi", "Una uwezo wa kuongoza", "Una uhodari wa mawasiliano"],
        'B': ["Una sifa za unyenyekevu", "Una uwezo wa kutunza siri", "Una uhodari wa ushirikiano"],
        'C': ["Una sifa za ubunifu", "Una uwezo wa kuelezea hisia", "Una uhodari wa sanaa"],
        'D': ["Una bidii na uvumilivu", "Una uwezo wa kufanya kazi kwa utaratibu", "Una uaminifu mkubwa"],
        'E': ["Una uhodari wa mazungumzo", "Una uwezo wa kushawishi watu", "Una upendo na huruma"],
        'F': ["Una nguvu na ujasiri", "Una uwezo wa kutatua matatizo", "Una uvumilivu wa hali ya juu"],
        'G': ["Una hekima na ufahamu", "Una uwezo wa kufundisha wengine", "Una busara ya kutosha"],
        'H': ["Una uwezo wa kusikiliza", "Una uvumilivu wa kusubiri", "Una uaminifu kwa wengine"],
        'I': ["Una uhodari wa kuongoza", "Una uwezo wa kuwaweka watu pamoja", "Una heshima na utu"],
        'J': ["Una ukarimu na upendo", "Una uwezo wa kusaidia wengine", "Una huruma kubwa"],
        'K': ["Una uhodari wa kufanya kazi", "Una uwezo wa kufikia malengo", "Una nidhamu kali"],
        'L': ["Una ubunifu na werevu", "Una uwezo wa kubadilika", "Una mbinu za kipekee"],
        'M': ["Una uwezo wa kuhamasisha", "Una uhodari wa mawasiliano", "Una shauku na bidii"],
        'N': ["Una uvumilivu wa hali ya juu", "Una uwezo wa kustahimili shida", "Una imani thabiti"],
        'O': ["Una uwezo wa kuona mbali", "Una uhodari wa kupanga mipango", "Una busara ya kutosha"],
        'P': ["Una upendo na ukarimu", "Una uwezo wa kuwajali wengine", "Una huruma kubwa"],
        'Q': ["Una uwezo wa kuwa kiongozi", "Una uhodari wa kufanya maamuzi", "Una heshima na utu"],
        'R': ["Una uhodari wa michezo", "Una uwezo wa kufanya kazi kwa timu", "Una nguvu na bidii"],
        'S': ["Una uwezo wa kusoma hali", "Una uhodari wa kushauri", "Una busara na hekima"],
        'T': ["Una uwezo wa kufundisha", "Una uhodari wa kueleza mambo", "Una uvumilivu wa kutosha"],
        'U': ["Una ubunifu na werevu", "Una uwezo wa kuvumbua mambo", "Una mbinu za kipekee"],
        'V': ["Una uhodari wa kusaidia", "Una uwezo wa kutibu wagonjwa", "Una huruma na upendo"],
        'W': ["Una uwezo wa kuongoza", "Una uhodari wa kufanya biashara", "Una busara na hekima"],
        'X': ["Una uwezo wa kutatua matatizo", "Una uhodari wa kuchambua", "Una uvumilivu wa hali ya juu"],
        'Y': ["Una uwezo wa kuhamasisha", "Una uhodari wa mawasiliano", "Una shauku na bidii"],
        'Z': ["Una uwezo wa kufanya kazi", "Una uhodari wa kufikia malengo", "Una nidhamu kali"]
    };

    let currentData = null;

    // ==================== FUNCTIONS ZA RAMLI ====================
    function switchPage(pageId, btn) {
        document.querySelectorAll('.container').forEach(el => el.style.display = 'none');
        document.querySelectorAll('.btn-service').forEach(b => b.classList.remove('active'));
        document.getElementById('page-' + pageId).style.display = 'block';
        if(btn) btn.classList.add('active');
        if(pageId !== 'ramli') {
            document.getElementById('cards-container').style.display = 'none';
            document.getElementById('send-results-container').style.display = 'none';
            document.getElementById('next-page-container').style.display = 'none';
        }
    }

    function anzaRamli() {
        const name = document.getElementById('full-name').value;
        if(name.length < 3) { alert("Tafadhali andika jina kamili."); return; }
        document.getElementById('intro-overlay').style.display = 'flex';
        setTimeout(() => finishIntro(name), 2000);
    }

    function finishIntro(name) {
        document.getElementById('intro-overlay').style.display = 'none';
        chakataData(name);
        document.getElementById('page-ramli').style.display = 'none';
        document.getElementById('cards-container').style.display = 'flex';
        document.getElementById('send-results-container').style.display = 'block';
        document.getElementById('next-page-container').style.display = 'block';
    }

    function chakataData(name) {
        const d = parseInt(document.getElementById('birth-day').value);
        const m = parseInt(document.getElementById('birth-month').value);
        let zIdx = 1; 
        if((m==3 && d>=21)||(m==4 && d<=19)) zIdx=1;
        else if((m==4 && d>=20)||(m==5 && d<=20)) zIdx=2;
        else if((m==5 && d>=21)||(m==6 && d<=20)) zIdx=3;
        else if((m==6 && d>=21)||(m==7 && d<=22)) zIdx=4;
        else if((m==7 && d>=23)||(m==8 && d<=22)) zIdx=5;
        else if((m==8 && d>=23)||(m==9 && d<=22)) zIdx=6;
        else if((m==9 && d>=23)||(m==10 && d<=22)) zIdx=7;
        else if((m==10 && d>=23)||(m==11 && d<=21)) zIdx=8;
        else if((m==11 && d>=22)||(m==12 && d<=21)) zIdx=9;
        else if((m==12 && d>=22)||(m==1 && d<=19)) zIdx=10;
        else if((m==1 && d>=20)||(m==2 && d<=18)) zIdx=11;
        else zIdx=12;

        const zodiac = ZODIAC_DB[zIdx] || ZODIAC_DB[1];
        const letter = name.charAt(0).toUpperCase();
        const letterTraits = HERUFI_DB[letter] || HERUFI_DB['A'];

        currentData = { name, zodiac: zodiac.name, date: `${d}/${m}` };
        const container = document.getElementById('cards-container');
        container.innerHTML = '';

        // CARD 1
        const card1 = document.createElement('div'); card1.className = 'card';
        card1.innerHTML = `
            <div class="card-inner">
                <div class="card-back" style="background-image: url('${zodiac.image}')">
                    <div class="card-back-content">
                        <div class="card-title-back">NYOTA YAKO</div>
                        <div class="card-hint">Gusa Kufungua</div>
                    </div>
                </div>
                <div class="card-front">
                    <img src="${zodiac.image}" class="card-header-img" loading="lazy">
                    <button class="close-card" onclick="event.stopPropagation(); closeCard(this)">√ó</button>
                    <div class="card-body">
                        <h3>${zodiac.name.toUpperCase()}</h3>
                        <p><strong>Wewe ${name}, ni mtu:</strong></p>
                        <div class="good-traits">${zodiac.good.map(t=>`<span>${t}</span>`).join('')}</div>
                        <p><strong>Lakini changamoto zako ni:</strong></p>
                        <div class="bad-traits">${zodiac.bad.map(t=>`<span>${t}</span>`).join('')}</div>
                    </div>
                </div>
            </div>`;
        card1.onclick = function() { toggleCard(this); }; container.appendChild(card1);

        // CARD 2
        const card2 = document.createElement('div'); card2.className = 'card';
        card2.innerHTML = `
            <div class="card-inner">
                <div class="card-back" style="background-image: url('https://images.unsplash.com/photo-1505751172876-fa1923c5c528?auto=format&fit=crop&w=600')">
                    <div class="card-back-content">
                        <div class="card-title-back">AFYA YAKO</div>
                        <div class="card-hint">Gusa Kufungua</div>
                    </div>
                </div>
                <div class="card-front">
                    <img src="https://images.unsplash.com/photo-1505751172876-fa1923c5c528?auto=format&fit=crop&w=600" class="card-header-img" loading="lazy">
                    <button class="close-card" onclick="event.stopPropagation(); closeCard(this)">√ó</button>
                    <div class="card-body">
                        <h3>AFYA YAKO (${zodiac.name})</h3>
                        <p><strong>Uwezekano wa kupata:</strong></p>
                        <ul>${zodiac.health.map(h=>`<li>${h}</li>`).join('')}</ul>
                        <p><strong>Epuka vitu hivi:</strong></p>
                        <ul>${zodiac.avoid.map(a=>`<li>${a}</li>`).join('')}</ul>
                    </div>
                </div>
            </div>`;
        card2.onclick = function() { toggleCard(this); }; container.appendChild(card2);

        // CARD 3
        const card3 = document.createElement('div'); card3.className = 'card';
        card3.innerHTML = `
            <div class="card-inner">
                <div class="card-back" style="background-image: url('https://images.unsplash.com/photo-1532153975070-2e9ab71f1b14?auto=format&fit=crop&w=600')">
                    <div class="card-back-content">
                        <div class="card-title-back">HERUFI YA JINA</div>
                        <div class="card-hint">Gusa Kufungua</div>
                    </div>
                </div>
                <div class="card-front">
                    <img src="https://images.unsplash.com/photo-1532153975070-2e9ab71f1b14?auto=format&fit=crop&w=600" class="card-header-img" loading="lazy">
                    <button class="close-card" onclick="event.stopPropagation(); closeCard(this)">√ó</button>
                    <div class="card-body">
                        <h3>JINA LAKO (${letter})</h3>
                        <p><strong>Sifa zako za kipekee:</strong></p>
                        <ul>${letterTraits.map(t=>`<li>${t}</li>`).join('')}</ul>
                        <p><strong>Watu unaoweza kuendana nao:</strong></p>
                        <ul>${zodiac.compatible.map(c=>`<li>${c}</li>`).join('')}</ul>
                    </div>
                </div>
            </div>`;
        card3.onclick = function() { toggleCard(this); }; container.appendChild(card3);

        // CARD 4
        const card4 = document.createElement('div'); card4.className = 'card';
        card4.innerHTML = `
            <div class="card-inner">
                <div class="card-back" style="background-image: url('https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?auto=format&fit=crop&w=600')">
                    <div class="card-back-content">
                        <div class="card-title-back">KAZI ZAKO</div>
                        <div class="card-hint">Gusa Kufungua</div>
                    </div>
                </div>
                <div class="card-front">
                    <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?auto=format&fit=crop&w=600" class="card-header-img" loading="lazy">
                    <button class="close-card" onclick="event.stopPropagation(); closeCard(this)">√ó</button>
                    <div class="card-body">
                        <h3>KAZI ZINAZOKUFA A (${zodiac.name})</h3>
                        <p><strong>Unastahili kufanya:</strong></p>
                        <ul>${zodiac.careers.map(c=>`<li>${c}</li>`).join('')}</ul>
                        <p><strong>Usifanye kazi hizi:</strong></p>
                        <ul>${zodiac.avoid_careers.map(c=>`<li>${c}</li>`).join('')}</ul>
                    </div>
                </div>
            </div>`;
        card4.onclick = function() { toggleCard(this); }; container.appendChild(card4);
    }

    function toggleCard(card) {
        document.querySelectorAll('.card').forEach(c => { if(c !== card) c.classList.remove('flipped', 'expanded'); });
        card.classList.toggle('flipped');
        if(card.classList.contains('flipped')) { setTimeout(() => card.classList.add('expanded'), 400); } 
        else { card.classList.remove('expanded'); }
    }
    
    function closeCard(btn) { 
        const card = btn.closest('.card');
        if (card) card.classList.remove('expanded', 'flipped'); 
    }
    
    function tumaWhatsApp(type) {
        let msg = "";
        if(type === 'MIADI') {
            const name = document.getElementById('app-name').value;
            const date = document.getElementById('app-date').value;
            const reason = document.getElementById('app-reason').value;
            if (!name || !date || !reason) { alert("Tafadhali jaza taarifa zote"); return; }
            msg = `*MIADI YA DR. WILLIAM*%0A%0AJina: ${encodeURIComponent(name)}%0ATarehe: ${encodeURIComponent(date)}%0ASababu: ${encodeURIComponent(reason)}`;
        } else if (type === 'DAWA') {
            const dawa = document.getElementById('dawa_list').value;
            const loc = document.getElementById('dawa-location').value;
            const phone = document.getElementById('dawa-phone').value;
            if (!dawa || !loc) { alert("Tafadhali jaza taarifa zote"); return; }
            msg = `*ODA YA DAWA*%0A%0ADawa: ${encodeURIComponent(dawa)}%0AMahali: ${encodeURIComponent(loc)}%0ASimu: ${encodeURIComponent(phone)}`;
        } else if (type === 'MAONI') {
            const txt = document.getElementById('msg-content').value;
            if (!txt) { alert("Tafadhali andika ujumbe"); return; }
            msg = `*MAONI*%0A%0A${encodeURIComponent(txt)}`;
        }
        window.open(`https://wa.me/255762286282?text=${msg}`, '_blank');
    }
    
    function tumaMatokeoWhatsApp() {
        if(!currentData) return;
        const msg = `*MATOKEO YA RAMLI (DR. WILLIAM)*%0A%0AJina: ${encodeURIComponent(currentData.name)}%0ANyota: ${encodeURIComponent(currentData.zodiac)}%0ATarehe: ${encodeURIComponent(currentData.date)}%0A%0ANimeona matokeo yangu, nahitaji ufafanuzi zaidi.`;
        window.open(`https://wa.me/255762286282?text=${msg}`, '_blank');
    }

    // ===== INITIALIZE =====
    window.onload = function() {
        checkAccessOnLoad();
        
        document.body.addEventListener('click', function(e) {
            if (e.target.id === 'timer-display') {
                showExpiryMessage();
            }
        });
    }

    // Hakikisha kitufe kinafanya kazi
    (function() {
        if (window.matchMedia('(display-mode: standalone)').matches) {
            const container = document.getElementById('install-container');
            if (container) container.style.display = 'none';
        }
        console.log('Install button script loaded');
    })();
</script>
</body>
</html>
